import{createRequire as D}from"node:module";var G=Object.create;var{getPrototypeOf:_,defineProperty:X,getOwnPropertyNames:E}=Object;var F=Object.prototype.hasOwnProperty;var oi=(i,e,s)=>{s=i!=null?G(_(i)):{};let n=e||!i||!i.__esModule?X(s,"default",{value:i,enumerable:!0}):s;for(let u of E(i))if(!F.call(n,u))X(n,u,{get:()=>i[u],enumerable:!0});return n};var bi=(i,e)=>()=>(e||i((e={exports:{}}).exports,e),e.exports);var H=D(import.meta.url);import d from"node:path";import ii from"node:path";import y from"node:path";import{fileURLToPath as N}from"node:url";import{createRequire as h}from"node:module";var C=typeof Bun!=="undefined";function a(i,e){try{return h(e??y.resolve(process.cwd(),"src")).resolve(i,{paths:e?[y.resolve(e.startsWith("file://")?N(e):e,"..")]:void 0})}catch(s){if(!C)throw s;return Bun.resolveSync(i,e?y.dirname(e):import.meta.dirname)}}import S from"node:path";import{pathToFileURL as O}from"node:url";var R=typeof Bun==="undefined";function v(i,e,s){try{let n=a(S.join(e,i));return I(n,s)}catch(n){return null}}function I(i,e=R){return e?O(i).href:i}async function x(i,e=ii.join(process.cwd(),"build")){let s=v(i,e);if(!s)return null;return await import(s)}import w from"node:process";import ei from"node:os";import z from"node:tty";function si(){let i=w?.env??{};if(!i.FORCE_COLOR)return;if(i.FORCE_COLOR==="true"||i.FORCE_COLOR.length===0)return!0;if(i.FORCE_COLOR==="false")return!1;return Math.min(Number.parseInt(i.FORCE_COLOR,10),3)>0}function J(){let i=w?.env??{},e=si();if(e!==void 0)return e;if(!z.isatty(1)&&!z.isatty(2))return!1;if(w.platform==="win32"){let s=ei.release().split(".");return Number(s[0])>=10&&Number(s[2])>=10586}return i.TERM!=="dumb"}var c=J();var k=(i)=>c?`\x1B[32m${i}\x1B[0m`:i,Q=(i)=>c?`\x1B[33m${i}\x1B[0m`:i,Y=(i)=>c?`\x1B[31m${i}\x1B[0m`:i,Z=(i)=>c?`\x1B[34m${i}\x1B[0m`:i,K=(i)=>c?`\x1B[36m${i}\x1B[0m`:i,Ji=(i)=>c?`\x1B[1m${i}\x1B[0m`:i;var A="0.1.5-canary.3";var ni=/\\/g,V="/_404",W="/_500",di=process.platform!=="darwin"&&process.platform!=="win32",ui=new Set(["static","desktop","android","ios"]);function T(){let i=process.argv[1]??"",{NODE_ENV:e}=process.env,s=d.join("brisa","out","cli"),n=Boolean(process.env.IS_PROD)||e==="production"||process.argv.some((m)=>m==="PROD"),u=process.argv.some((m)=>m==="DEV")||e==="development",l=Boolean(process.env.IS_SERVE_PROCESS)||Boolean(i.endsWith(d.join(s,"serve","index.js"))),o=Boolean(process.env.IS_STANDALONE_SERVER??"true");console.log(o);let j=o?import.meta.dirname:process.cwd(),p=Boolean(i.endsWith(d.join(s,"build.js"))),t=i.replace(new RegExp(`${s.replace(ni,"\\\\")}.*`),"brisa"),r=o?import.meta.dirname:d.resolve(j,"src"),b=o?import.meta.dirname:process.env.BRISA_BUILD_FOLDER??d.resolve(j,"build");return{WORKSPACE:p?r:b,JS_RUNTIME:typeof Bun!=="undefined"?"bun":"node",PAGE_404:V,PAGE_500:W,VERSION:A,RESERVED_PAGES:[V,W],IS_PRODUCTION:n,IS_DEVELOPMENT:u,IS_SERVE_PROCESS:l,IS_BUILD_PROCESS:p,PORT:Number.parseInt(process.argv[2])||3000,BUILD_DIR:b,ROOT_DIR:j,BRISA_DIR:t,SRC_DIR:r,ASSETS_DIR:d.resolve(b,"public"),PAGES_DIR:d.resolve(b,"pages"),LOG_PREFIX:{WAIT:K("[ wait ]")+" ",READY:k("[ ready ] ")+" ",INFO:Z("[ info ] ")+" ",ERROR:Y("[ error ] ")+" ",WARN:Q("[ warn ] ")+" ",TICK:k("\u2713 ")+" "},REGEX:{CATCH_ALL:/\[\[\.{3}.*?\]\]/g,DYNAMIC:/\[.*?\]/g,REST_DYNAMIC:/\[\.{3}.*?\]/g},HEADERS:{CACHE_CONTROL:n?"public, max-age=31536000, immutable":"no-store, must-revalidate"}}}async function q({IS_PRODUCTION:i,BUILD_DIR:e,WORKSPACE:s,ROOT_DIR:n}){let u={trailingSlash:!1,assetPrefix:"",basePath:"",extendPlugins:(m)=>m,output:"bun",clustering:i&&di,integrations:[],idleTimeout:30},l=["lightningcss"],o=(await x("css-files",e))?.default??[],p=(await x("_integrations",d.resolve(e,"web-components")))?.webContextPlugins??[],t=(await x("i18n",s))?.default,r={...u,...(await x("brisa.config",n))?.default??{}},b=ui.has(r?.output);if(t?.pages)t.pages=JSON.parse(JSON.stringify(t.pages,(m,f)=>typeof f==="string"&&f.length>1?f.replace(/\/$/g,""):f));let M=new Set(t?.locales||[]);if(r.basePath&&!r.basePath.startsWith(d.sep))r.basePath=d.sep+r.basePath;if(!r.external)r.external=l;else r.external=[...r.external,...l];return globalThis.__BASE_PATH__=r.basePath,{CSS_FILES:o,CONFIG:r,I18N_CONFIG:t,WEB_CONTEXT_PLUGINS:p,LOCALES_SET:M,IS_STATIC_EXPORT:b}}var $=T(),g={...$,...await q($)},B=()=>globalThis.mockConstants?globalThis.mockConstants:g;async function Bi(){g=globalThis.mockConstants={...g,...await q($)}}var Li=g;import P from"node:path";import L from"node:fs";var ti=[".ts",".tsx",".js",".jsx"];function U(){let{ROOT_DIR:i}=B();if(!ti.some((s)=>L.existsSync(P.join(i,`brisa.config${s}`)))){L.writeFileSync(P.join(i,"brisa.config.ts"),ci);return}console.log("TODO: Integrate MDX into existing brisa.config.ts")}var ci=`import mdx from '@mdx-js/esbuild';
import type { Configuration } from "brisa";
import type { BunPlugin } from 'bun';

const mdxPlugin = mdx({ jsxImportSource: "brisa" }) as unknown as BunPlugin;

export default {
  extendPlugins: (brisaPlugins) => [mdxPlugin, ...brisaPlugins],
} satisfies Configuration;
`;if(H.main==H.module)U(),console.log("MDX integration completed!"),process.exit(0);export{U as default};
