import{createRequire as F}from"node:module";var G=Object.create;var{getPrototypeOf:_,defineProperty:K,getOwnPropertyNames:C}=Object;var E=Object.prototype.hasOwnProperty;var bi=(i,e,n)=>{n=i!=null?G(_(i)):{};let s=e||!i||!i.__esModule?K(n,"default",{value:i,enumerable:!0}):n;for(let d of C(i))if(!E.call(s,d))K(s,d,{get:()=>i[d],enumerable:!0});return s};var mi=(i,e)=>()=>(e||i((e={exports:{}}).exports,e),e.exports);var M=F(import.meta.url);import H from"node:child_process";import oi from"node:fs";import ui from"node:path";import c from"node:path";import ei from"node:path";import y from"node:path";import{fileURLToPath as N}from"node:url";import{createRequire as h}from"node:module";var D=typeof Bun!=="undefined";function w(i,e){try{return h(e??y.resolve(process.cwd(),"src")).resolve(i,{paths:e?[y.resolve(e.startsWith("file://")?N(e):e,"..")]:void 0})}catch(n){if(!D)throw n;return Bun.resolveSync(i,e?y.dirname(e):import.meta.dirname)}}import R from"node:path";import{pathToFileURL as O}from"node:url";var I=typeof Bun==="undefined";function j(i,e,n){try{let s=w(R.join(e,i));return ii(s,n)}catch(s){return null}}function ii(i,e=I){return e?O(i).href:i}async function x(i,e=ei.join(process.cwd(),"build")){let n=j(i,e);if(!n)return null;return await import(n)}import v from"node:process";import ni from"node:os";import W from"node:tty";function ri(){let i=v?.env??{};if(!i.FORCE_COLOR)return;if(i.FORCE_COLOR==="true"||i.FORCE_COLOR.length===0)return!0;if(i.FORCE_COLOR==="false")return!1;return Math.min(Number.parseInt(i.FORCE_COLOR,10),3)>0}function J(){let i=v?.env??{},e=ri();if(e!==void 0)return e;if(!W.isatty(1)&&!W.isatty(2))return!1;if(v.platform==="win32"){let n=ni.release().split(".");return Number(n[0])>=10&&Number(n[2])>=10586}return i.TERM!=="dumb"}var o=J();var k=(i)=>o?`\x1B[32m${i}\x1B[0m`:i,Q=(i)=>o?`\x1B[33m${i}\x1B[0m`:i,X=(i)=>o?`\x1B[31m${i}\x1B[0m`:i,Y=(i)=>o?`\x1B[34m${i}\x1B[0m`:i,Z=(i)=>o?`\x1B[36m${i}\x1B[0m`:i,q=(i)=>o?`\x1B[1m${i}\x1B[0m`:i;var V="0.1.5-canary.3";var di=/\\/g,T="/_404",P="/_500",ci=process.platform!=="darwin"&&process.platform!=="win32",ti=new Set(["static","desktop","android","ios"]);function B(){let i=process.argv[1]??"",{NODE_ENV:e}=process.env,n=c.join("brisa","out","cli"),s=Boolean(process.env.IS_PROD)||e==="production"||process.argv.some((l)=>l==="PROD"),d=process.argv.some((l)=>l==="DEV")||e==="development",u=Boolean(process.env.IS_SERVE_PROCESS)||Boolean(i.endsWith(c.join(n,"serve","index.js"))),b=Boolean(process.env.IS_STANDALONE_SERVER??"true");console.log(b);let p=b?import.meta.dirname:process.cwd(),a=Boolean(i.endsWith(c.join(n,"build.js"))),t=i.replace(new RegExp(`${n.replace(di,"\\\\")}.*`),"brisa"),r=b?import.meta.dirname:c.resolve(p,"src"),m=b?import.meta.dirname:process.env.BRISA_BUILD_FOLDER??c.resolve(p,"build");return{WORKSPACE:a?r:m,JS_RUNTIME:typeof Bun!=="undefined"?"bun":"node",PAGE_404:T,PAGE_500:P,VERSION:V,RESERVED_PAGES:[T,P],IS_PRODUCTION:s,IS_DEVELOPMENT:d,IS_SERVE_PROCESS:u,IS_BUILD_PROCESS:a,PORT:Number.parseInt(process.argv[2])||3000,BUILD_DIR:m,ROOT_DIR:p,BRISA_DIR:t,SRC_DIR:r,ASSETS_DIR:c.resolve(m,"public"),PAGES_DIR:c.resolve(m,"pages"),LOG_PREFIX:{WAIT:Z("[ wait ]")+" ",READY:k("[ ready ] ")+" ",INFO:Y("[ info ] ")+" ",ERROR:X("[ error ] ")+" ",WARN:Q("[ warn ] ")+" ",TICK:k("\u2713 ")+" "},REGEX:{CATCH_ALL:/\[\[\.{3}.*?\]\]/g,DYNAMIC:/\[.*?\]/g,REST_DYNAMIC:/\[\.{3}.*?\]/g},HEADERS:{CACHE_CONTROL:s?"public, max-age=31536000, immutable":"no-store, must-revalidate"}}}async function $({IS_PRODUCTION:i,BUILD_DIR:e,WORKSPACE:n,ROOT_DIR:s}){let d={trailingSlash:!1,assetPrefix:"",basePath:"",extendPlugins:(l)=>l,output:"bun",clustering:i&&ci,integrations:[],idleTimeout:30},u=["lightningcss"],b=(await x("css-files",e))?.default??[],a=(await x("_integrations",c.resolve(e,"web-components")))?.webContextPlugins??[],t=(await x("i18n",n))?.default,r={...d,...(await x("brisa.config",s))?.default??{}},m=ti.has(r?.output);if(t?.pages)t.pages=JSON.parse(JSON.stringify(t.pages,(l,f)=>typeof f==="string"&&f.length>1?f.replace(/\/$/g,""):f));let z=new Set(t?.locales||[]);if(r.basePath&&!r.basePath.startsWith(c.sep))r.basePath=c.sep+r.basePath;if(!r.external)r.external=u;else r.external=[...r.external,...u];return globalThis.__BASE_PATH__=r.basePath,{CSS_FILES:b,CONFIG:r,I18N_CONFIG:t,WEB_CONTEXT_PLUGINS:a,LOCALES_SET:z,IS_STATIC_EXPORT:m}}var A=B(),g={...A,...await $(A)},S=()=>globalThis.mockConstants?globalThis.mockConstants:g;async function Pi(){g=globalThis.mockConstants={...g,...await $(A)}}var Si=g;var L=`import type { Configuration } from "brisa";
import PandaCSS from 'brisa-pandacss';

export default {
  integrations: [PandaCSS()],
} as Configuration;

`;async function U(){let{ROOT_DIR:i,LOG_PREFIX:e}=S(),n=j("brisa.config",i),s=Object.entries({"brisa-pandacss":"0.1.5-canary.3","@pandacss/dev":"0.47.0",postcss:"8.4.47"});if(console.log(e.WAIT,"Adding PandaCSS dependencies..."),H.spawnSync("bun",["add",...s.map(([d,u])=>`${d}@${u}`)],{stdio:"inherit"}),console.log(e.INFO,e.TICK,"PandaCSS dependencies added!"),H.spawnSync("bun",["panda","init","-p"]),H.spawnSync("bun",["pkg","set",'scripts.prepare="panda codegen"']),console.log(e.INFO,e.TICK,"PandaCSS initialized!"),!n)oi.writeFileSync(ui.join(i,"brisa.config.ts"),L),console.log(e.INFO,e.TICK,"PandaCSS configuration added!");else console.log(e.WARN,`Almost there! We detected an existing ${q("brisa.config.ts")} file.`),console.log(e.WARN,"Please add the following configuration to integrate PandaCSS:"),console.log(e.WARN),L.split("\n").forEach((d)=>console.log(e.WARN,q(d)))}if(M.main==M.module)await U(),process.exit(0);export{U as default};
