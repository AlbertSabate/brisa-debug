import{createRequire as F}from"node:module";var P=Object.create;var{getPrototypeOf:S,defineProperty:T,getOwnPropertyNames:_}=Object;var E=Object.prototype.hasOwnProperty;var bi=(i,e,n)=>{n=i!=null?P(S(i)):{};let s=e||!i||!i.__esModule?T(n,"default",{value:i,enumerable:!0}):n;for(let d of _(i))if(!E.call(s,d))T(s,d,{get:()=>i[d],enumerable:!0});return s};var mi=(i,e)=>()=>(e||i((e={exports:{}}).exports,e),e.exports);var M=F(import.meta.url);import ci from"node:child_process";import oi from"node:fs";import ui from"node:path";import t from"node:path";import ii from"node:path";import y from"node:path";import{fileURLToPath as C}from"node:url";import{createRequire as h}from"node:module";var N=typeof Bun!=="undefined";function w(i,e){try{return h(e??y.resolve(process.cwd(),"src")).resolve(i,{paths:e?[y.resolve(e.startsWith("file://")?C(e):e,"..")]:void 0})}catch(n){if(!N)throw n;return Bun.resolveSync(i,e?y.dirname(e):import.meta.dirname)}}import D from"node:path";import{pathToFileURL as R}from"node:url";var O=typeof Bun==="undefined";function j(i,e,n){try{let s=w(D.join(e,i));return I(s,n)}catch(s){return null}}function I(i,e=O){return e?R(i).href:i}async function l(i,e=ii.join(process.cwd(),"build")){let n=j(i,e);if(!n)return null;return await import(n)}import v from"node:process";import ei from"node:os";import W from"node:tty";function ni(){let i=v?.env??{};if(!i.FORCE_COLOR)return;if(i.FORCE_COLOR==="true"||i.FORCE_COLOR.length===0)return!0;if(i.FORCE_COLOR==="false")return!1;return Math.min(Number.parseInt(i.FORCE_COLOR,10),3)>0}function z(){let i=v?.env??{},e=ni();if(e!==void 0)return e;if(!W.isatty(1)&&!W.isatty(2))return!1;if(v.platform==="win32"){let n=ei.release().split(".");return Number(n[0])>=10&&Number(n[2])>=10586}return i.TERM!=="dumb"}var o=z();var q=(i)=>o?`\x1B[32m${i}\x1B[0m`:i,J=(i)=>o?`\x1B[33m${i}\x1B[0m`:i,K=(i)=>o?`\x1B[31m${i}\x1B[0m`:i,Q=(i)=>o?`\x1B[34m${i}\x1B[0m`:i,X=(i)=>o?`\x1B[36m${i}\x1B[0m`:i,$=(i)=>o?`\x1B[1m${i}\x1B[0m`:i;var Y="0.1.5-canary.3";var si=/\\/g,Z="/_404",V="/_500",di=process.platform!=="darwin"&&process.platform!=="win32",ti=new Set(["static","desktop","android","ios"]);function B(){let i=process.argv[1]??"",{NODE_ENV:e}=process.env,n=t.join("brisa","out","cli"),s=Boolean(process.env.IS_PROD)||e==="production"||process.argv.some((m)=>m==="PROD"),d=process.argv.some((m)=>m==="DEV")||e==="development",u=Boolean(process.env.IS_SERVE_PROCESS)||Boolean(i.endsWith(t.join(n,"serve","index.js"))),x=Boolean(process.env.IS_STANDALONE_SERVER),p=x?import.meta.dirname:process.cwd(),f=Boolean(i.endsWith(t.join(n,"build.js"))),c=i.replace(new RegExp(`${n.replace(si,"\\\\")}.*`),"brisa"),r=x?import.meta.dirname:t.resolve(p,"src"),b=x?import.meta.dirname:process.env.BRISA_BUILD_FOLDER??t.resolve(p,"build");return{WORKSPACE:f?r:b,JS_RUNTIME:typeof Bun!=="undefined"?"bun":"node",PAGE_404:Z,PAGE_500:V,VERSION:Y,RESERVED_PAGES:[Z,V],IS_PRODUCTION:s,IS_DEVELOPMENT:d,IS_SERVE_PROCESS:u,IS_BUILD_PROCESS:f,PORT:Number.parseInt(process.argv[2])||3000,BUILD_DIR:b,ROOT_DIR:p,BRISA_DIR:c,SRC_DIR:r,ASSETS_DIR:t.resolve(b,"public"),PAGES_DIR:t.resolve(b,"pages"),LOG_PREFIX:{WAIT:X("[ wait ]")+" ",READY:q("[ ready ] ")+" ",INFO:Q("[ info ] ")+" ",ERROR:K("[ error ] ")+" ",WARN:J("[ warn ] ")+" ",TICK:q("\u2713 ")+" "},REGEX:{CATCH_ALL:/\[\[\.{3}.*?\]\]/g,DYNAMIC:/\[.*?\]/g,REST_DYNAMIC:/\[\.{3}.*?\]/g},HEADERS:{CACHE_CONTROL:s?"public, max-age=31536000, immutable":"no-store, must-revalidate"}}}async function k({IS_PRODUCTION:i,BUILD_DIR:e,WORKSPACE:n,ROOT_DIR:s}){let d={trailingSlash:!1,assetPrefix:"",basePath:"",extendPlugins:(m)=>m,output:"bun",clustering:i&&di,integrations:[],idleTimeout:30},u=["lightningcss"],x=(await l("css-files",e))?.default??[],f=(await l("_integrations",t.resolve(e,"web-components")))?.webContextPlugins??[],c=(await l("i18n",n))?.default,r={...d,...(await l("brisa.config",s))?.default??{}},b=ti.has(r?.output);if(c?.pages)c.pages=JSON.parse(JSON.stringify(c.pages,(m,g)=>typeof g==="string"&&g.length>1?g.replace(/\/$/g,""):g));let H=new Set(c?.locales||[]);if(r.basePath&&!r.basePath.startsWith(t.sep))r.basePath=t.sep+r.basePath;if(!r.external)r.external=u;else r.external=[...r.external,...u];return globalThis.__BASE_PATH__=r.basePath,{CSS_FILES:x,CONFIG:r,I18N_CONFIG:c,WEB_CONTEXT_PLUGINS:f,LOCALES_SET:H,IS_STATIC_EXPORT:b}}var A=B(),a={...A,...await k(A)},L=()=>globalThis.mockConstants?globalThis.mockConstants:a;async function Bi(){a=globalThis.mockConstants={...a,...await k(A)}}var Ui=a;var U=`import type { Configuration } from "brisa";
import tailwindcss from 'brisa-tailwindcss';

export default {
  integrations: [tailwindcss()],
} as Configuration;

`;async function G(){let{ROOT_DIR:i,LOG_PREFIX:e}=L(),n=j("brisa.config",i),s=Object.entries({"brisa-tailwindcss":"0.1.5-canary.3","@tailwindcss/postcss":"4.0.0-alpha.25",postcss:"8.4.47",tailwindcss:"4.0.0-alpha.25"});if(console.log(e.WAIT,"Adding TailwindCSS dependencies..."),ci.spawnSync("bun",["add",...s.map(([d,u])=>`${d}@${u}`)],{stdio:"inherit"}),console.log(e.INFO,e.TICK,"TailwindCSS dependencies added!"),!n)oi.writeFileSync(ui.join(i,"brisa.config.ts"),U),console.log(e.INFO,e.TICK,"TailwindCSS configuration added!");else console.log(e.WARN,`Almost there! We detected an existing ${$("brisa.config.ts")} file.`),console.log(e.WARN,"Please add the following configuration to integrate TailwindCSS:"),console.log(e.WARN),U.split("\n").forEach((d)=>console.log(e.WARN,$(d)))}if(M.main==M.module)await G(),process.exit(0);export{G as default};
